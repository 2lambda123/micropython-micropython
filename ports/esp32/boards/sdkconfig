# MicroPython on ESP32, ESP IDF configuration
# The following options override the defaults

CONFIG_IDF_TARGET="esp32"

# WiFi/BT Coexist
#define CONFIG_SW_COEXIST_ENABLE=y
#define CONFIG_SW_COEXIST_PREFERENCE_VALUE=2
#define CONFIG_SW_COEXIST_PREFERENCE_BALANCE=y

# Application manager
CONFIG_APP_EXCLUDE_PROJECT_VER_VAR=y
CONFIG_APP_EXCLUDE_PROJECT_NAME_VAR=y

# Bootloader config
CONFIG_LOG_BOOTLOADER_LEVEL_WARN=y

# ESP32-specific
CONFIG_ESP32_DEFAULT_CPU_FREQ_240=y
CONFIG_TASK_WDT_CHECK_IDLE_TASK_CPU0=n
CONFIG_ESP32_XTAL_FREQ_AUTO=y

# Power Management
CONFIG_PM_ENABLE=y

# FreeRTOS
CONFIG_FREERTOS_UNICORE=y
CONFIG_FREERTOS_THREAD_LOCAL_STORAGE_POINTERS=2
CONFIG_SUPPORT_STATIC_ALLOCATION=y
CONFIG_ENABLE_STATIC_TASK_CLEAN_UP_HOOK=y

# UDP
CONFIG_PPP_SUPPORT=y
CONFIG_PPP_PAP_SUPPORT=y
CONFIG_PPP_CHAP_SUPPORT=y

# Bluetooth
CONFIG_BT_ENABLED=y
CONFIG_BLUEDROID_PINNED_TO_CORE=0
CONFIG_BTDM_CONTROLLER_PINNED_TO_CORE=0     ###
CONFIG_BLUEDROID_PINNED_TO_CORE_0=1         ###
CONFIG_BTDM_CONTROLLER_PINNED_TO_CORE_0=1   ###
CONFIG_ESP32_WIFI_TASK_PINNED_TO_CORE_0=1   ###

# But, you can also try make Bluetooth (BTDM_CONTROLLER_PINNED_TO_CORE and BLUEDROID_PINNED_TO_CORE) to the different core from Wifi.
# You know ESP32 share the RF between Bluetooth and WIFI, so when they use simultaneously, the performance will decrease, but it will keep working. What's the performance you want ESP32 to reach?

CONFIG_BT_ACL_CONNECTIONS=4
CONFIG_GATTS_ENABLE=y
